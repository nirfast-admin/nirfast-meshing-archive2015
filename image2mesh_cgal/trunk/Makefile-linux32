#CXX=g++-4.2
#CC=gcc-4.2

# Required libraries

# Location where CGAL shared libraries can be found for linking
CGALHEADER = $(HOME)/local/CGAL/3.8/include
BOOSTHEADER = $(HOME)/local/boost_1_45/include
INCHEAD = -I$(CGALHEADER) -I$(BOOSTHEADER)

# Location where CGAL shared libraries can be found for linking
CGALLIBS=$(HOME)/local/CGAL/3.8/lib
GMPLIBS=/usr/lib
BOOSTLIBS=$(HOME)/local/boost_1_45/lib
LIBPTHREAD=-lpthread
MACSDK=-isysroot /Developer/SDKs/MacOSX10.5.sdk -mmacosx-version-min=10.5
MACSDK=

# Paths to CGAL and boost headers
#LDFLAGS=-lCGAL -lgmp -lmpfr -lboost_thread
LDFLAGS=$(MACSDK) $(CGALLIBS)/libCGAL.a $(CGALLIBS)/libCGAL_ImageIO.a \
	$(GMPLIBS)/libmpfr.a $(GMPLIBS)/libgmp.a \
	$(BOOSTLIBS)/libboost_thread.a $(LIBPTHREAD) \
	-lz -L/usr/X11R6/lib -lGL

# Necessary compiler flags (g++)
CXXFLAGS=$(MACSDK) -Wall -fno-common -O3 \
	-frounding-math -fno-strict-aliasing

#rpath setting (this helps the final executable to easily locate
# required libraries)
RPATHSETTING = -Wl,-rpath,@executable_path/../lib$(OS32_64)/darwin/ 
RPATHSETTING += -Wl,-rpath,@loader_path/
RPATHSETTING = 



CXXFLAGS += $(INCHEAD)
linux: image2mesh_cgal.o
	$(CXX) image2mesh_cgal.o -o image2mesh_cgal-linux32.exe \
	       -L$(CGALLIBS) \
	       $(LDFLAGS) $(RPATHSETTING)
clean: \
	rm image2mesh_cgal-linux32.exe image2mesh_cgal.o	
	
.cpp$(OBJ_EXT):
	$(CXX) $(CXXFLAGS) $<
